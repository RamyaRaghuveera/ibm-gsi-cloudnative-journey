{"componentChunkName":"component---src-pages-developer-foundation-activities-labs-lab-5-index-mdx","path":"/developer-foundation/activities/labs/lab5/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes Lab 5 - Debugging"},"relativePagePath":"/developer-foundation/activities/labs/lab5/index.mdx","titleType":"page","MdxNode":{"id":"816d0412-65e7-59d9-a1d3-757f0e4cb205","children":[],"parent":"34c8571e-7bb0-545b-912d-f3a1bd70110a","internal":{"content":"---\ntitle: Kubernetes Lab 5 - Debugging\n---\n\n## Problem\n\nThe Hyper Drive isn't working and we need to find out why. Let's debug the `hyper-drive` deployment so that we can reach light speed again.\n\nHere are some tips to help you solve the Hyper Drive:\n\n- Check the description of the `deployment`.\n- Get and save the logs of one of the broken `pods`.\n- Are the correct `ports` assigned.\n- Make sure your `labels` and `selectors` are correct.\n- Check to see if the `Probes` are correctly working.\n- To fix the deployment, save then modify the yaml file for redeployment.\n\n## Solution\n\n### Setup environment\n\n- Execute the command to create the Deployement, Namespace, Service below definition.\n\n ```shell script\n  oc apply -f https://raw.githubusercontent.com/ibm-cloud-architecture/learning-cloudnative-101/master/lab-setup/lab-5-debug-k8s-setup.yaml\n  ```\n- Check the status of the POD.\n\n ```\n  oc get pods -n {DEV_NAMESPACE}\n  ```\n- Check the description of the deployment.\n\n ```\n  oc describe deployment hyper-drive -n {DEV_NAMESPACE}\n  ```\n- Save logs for broken pod.\n\n ```\n  oc logs <pod name> -n {DEV_NAMESPACE} > /home/cloud_user/debug/broken-pod-logs.log\n  ```\nIn the description you will see the following is wrong:\n  - Selector and Label names do not match.\n  - The Probe is TCP instead of HTTP Get.\n  - The Service Port is 80 instead of 8080.\n\n- To fix problem, can't do oc edit on deployement, need to delete and recreate the deployment. So export deployement and do the necessary  changes and recreate it.\n\n ```\n  oc get deployment <deployment name> -n {DEV_NAMESPACE} -o yaml --export > hyper-drive.yml\n  ```\n- Delete the existing deployement.\n\n ```\n  oc delete deployment <deployment name> -n {DEV_NAMESPACE}\n  ```\n\n- Edit the exported YAML file and apply.\n\n ```\n  oc apply -f hyper-drive.yml -n {DEV_NAMESPACE}\n  ```\n- Verify the deployement.\n\n ```\n  oc get deployment <deployment name> -n {DEV_NAMESPACE}\n  ```\n\n## Validate\n\n Once you get the Hyper Drive working again. Verify it by checking the endpoints.\n\n ```\n  kubectl get ep hyper-drive\n  ```","type":"Mdx","contentDigest":"65422a1e15a23cebbb4ca200ef40af84","counter":1091,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Kubernetes Lab 5 - Debugging"},"exports":{},"rawBody":"---\ntitle: Kubernetes Lab 5 - Debugging\n---\n\n## Problem\n\nThe Hyper Drive isn't working and we need to find out why. Let's debug the `hyper-drive` deployment so that we can reach light speed again.\n\nHere are some tips to help you solve the Hyper Drive:\n\n- Check the description of the `deployment`.\n- Get and save the logs of one of the broken `pods`.\n- Are the correct `ports` assigned.\n- Make sure your `labels` and `selectors` are correct.\n- Check to see if the `Probes` are correctly working.\n- To fix the deployment, save then modify the yaml file for redeployment.\n\n## Solution\n\n### Setup environment\n\n- Execute the command to create the Deployement, Namespace, Service below definition.\n\n ```shell script\n  oc apply -f https://raw.githubusercontent.com/ibm-cloud-architecture/learning-cloudnative-101/master/lab-setup/lab-5-debug-k8s-setup.yaml\n  ```\n- Check the status of the POD.\n\n ```\n  oc get pods -n {DEV_NAMESPACE}\n  ```\n- Check the description of the deployment.\n\n ```\n  oc describe deployment hyper-drive -n {DEV_NAMESPACE}\n  ```\n- Save logs for broken pod.\n\n ```\n  oc logs <pod name> -n {DEV_NAMESPACE} > /home/cloud_user/debug/broken-pod-logs.log\n  ```\nIn the description you will see the following is wrong:\n  - Selector and Label names do not match.\n  - The Probe is TCP instead of HTTP Get.\n  - The Service Port is 80 instead of 8080.\n\n- To fix problem, can't do oc edit on deployement, need to delete and recreate the deployment. So export deployement and do the necessary  changes and recreate it.\n\n ```\n  oc get deployment <deployment name> -n {DEV_NAMESPACE} -o yaml --export > hyper-drive.yml\n  ```\n- Delete the existing deployement.\n\n ```\n  oc delete deployment <deployment name> -n {DEV_NAMESPACE}\n  ```\n\n- Edit the exported YAML file and apply.\n\n ```\n  oc apply -f hyper-drive.yml -n {DEV_NAMESPACE}\n  ```\n- Verify the deployement.\n\n ```\n  oc get deployment <deployment name> -n {DEV_NAMESPACE}\n  ```\n\n## Validate\n\n Once you get the Hyper Drive working again. Verify it by checking the endpoints.\n\n ```\n  kubectl get ep hyper-drive\n  ```","fileAbsolutePath":"/Users/admin/Documents/ISL/Code/GSI-Labs/ibm-gsi-cloudnative-journey/src/pages/developer-foundation/activities/labs/lab5/index.mdx"}}},"staticQueryHashes":["1054721580","1054721580","1364590287","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","3273249464","768070550"]}